YC Todoï¼šä¹‹å¾Œå¦‚ä½•ç¹¼çºŒ Improve App ï¼† æ­£ç¢ºé–‹ç™¼ / ç™¼ä½ˆæµç¨‹ï¼ˆè£œå……ç­†è¨˜ï¼‰
====================================================================

é€™ä¸€ä»½æ˜¯ã€Œå®Œæˆç¬¬ä¸€ç‰ˆ macOS menubar appï¼ˆPopover ç‰ˆï¼‰ã€ä¹‹å¾Œçš„å¯¦æˆ°æµç¨‹ç­†è¨˜ã€‚
ç›®çš„ï¼šè®“ä¹‹å¾Œé–‹ç™¼ä¸æ··äº‚ï¼ŒçŸ¥é“ä»€éº¼æ™‚å€™ devã€ä»€éº¼æ™‚å€™ buildã€ä»€éº¼æ™‚å€™è¦é‡æ–°å®‰è£ã€‚

--------------------------------------------------------------------
0) ä½ ç›®å‰å·²å®Œæˆçš„æˆæœï¼ˆCheckpointï¼‰
--------------------------------------------------------------------

âœ… React + Vite Todo UIï¼ˆå« timer / ç‹€æ…‹ / localStorageï¼‰
âœ… ä½¿ç”¨ Tauri æ‰“åŒ…æˆ macOS Appï¼ˆ.app / .dmgï¼‰
âœ… Tray / Menubar iconï¼ˆé»æ“Šé–‹é—œï¼‰
âœ… Dock éš±è—ï¼ˆAccessory appï¼‰
âœ… å·²æ”¹æˆ macOS åŸç”Ÿ NSPopover è¡Œç‚º
   - å…¨è¢å¹• Chrome / VS Code éƒ½èƒ½æµ®åœ¨æœ€ä¸Šé¢
   - è¡Œç‚ºé¡ä¼¼ Proton VPN / Raycast
   - ä½¿ç”¨ tauri-plugin-nspopoverï¼ˆmacOS onlyï¼‰
âœ… UI å·²èª¿æ•´ç‚º Popover å°ºå¯¸ï¼ˆå¡«æ»¿ã€ä¸éœ²åº•è‰²ï¼‰

--------------------------------------------------------------------
1) ä¹‹å¾Œåªæœƒåœ¨å…©ç¨®æ¨¡å¼ä¹‹é–“åˆ‡æ›
--------------------------------------------------------------------

------------------------------------------------------------
ã€æ¨¡å¼ 1ã€‘é–‹ç™¼æ¨¡å¼ï¼ˆæ”¹åŠŸèƒ½ / æ”¹ UI / Debugï¼‰
------------------------------------------------------------
ç”¨é€”ï¼š
- æ”¹ React / CSS / UI æ’ç‰ˆ
- åŠ æ–°åŠŸèƒ½ï¼ˆtimerã€é–å®šã€æ’åºï¼‰
- æ”¹ tray / popover è¡Œç‚º
- Debug å•é¡Œ

æŒ‡ä»¤ï¼ˆå°ˆæ¡ˆæ ¹ç›®éŒ„ï¼‰ï¼š
  npx tauri dev

ç‰¹æ€§ï¼š
- éœ€è¦ VS Code + terminal
- React æœ‰ç†±æ›´æ–°ï¼ˆå¿«ï¼‰
- Rust / Tauri æœƒé‡æ–°ç·¨è­¯ï¼ˆè¼ƒæ…¢ï¼‰
- åªæ˜¯æ¸¬è©¦ï¼Œä¸æ˜¯æ­£å¼ App

ğŸ‘‰ ä»»ä½•æ”¹å‹•ï¼Œä¸€å®šå…ˆç”¨é€™å€‹æ¨¡å¼æ¸¬

------------------------------------------------------------
ã€æ¨¡å¼ 2ã€‘æ­£å¼ Appï¼ˆå¯¦éš›ä½¿ç”¨ / ç™¼ä½ˆï¼‰
------------------------------------------------------------
ç”¨é€”ï¼š
- ç”¢ç”ŸçœŸæ­£å¯ç”¨çš„ macOS app
- ä¸éœ€è¦ VS Code / terminal
- å¯æ‹–é€² Applications ä½¿ç”¨

æŒ‡ä»¤ï¼š
  npx tauri build

ç”¢ç‰©ä½ç½®ï¼š
- .appï¼š
  src-tauri/target/release/bundle/macos/YC Todo.app
- .dmgï¼š
  src-tauri/target/release/bundle/dmg/YC_Todo_0.x.x_*.dmg

ğŸ‘‰ æ¯æ¬¡æƒ³ã€Œç”¨æœ€æ–°ç‰ˆæœ¬ã€éƒ½ä¸€å®šè¦é‡æ–° build

--------------------------------------------------------------------
2) æœ€é‡è¦çš„æ¨™æº–å·¥ä½œæµç¨‹ï¼ˆä¸€å®šè¦è¨˜ä½ï¼‰
--------------------------------------------------------------------

ä½ ä¹‹å¾Œçš„é–‹ç™¼å¾ªç’°æ°¸é æ˜¯ï¼š

  æ”¹åŠŸèƒ½ / æ”¹ UI
        â†“
  npx tauri dev   ï¼ˆæ¸¬è©¦ï¼‰
        â†“
      OK
        â†“
  npx tauri build ï¼ˆç”¢ç”Ÿæ­£å¼ appï¼‰
        â†“
  ç”¨ .dmg å®‰è£ æˆ– è¦†è“‹ Applications è£¡çš„èˆŠ app

âš ï¸ Menubar app å¸¸è¦‹é™·é˜±ï¼š
- çœ‹èµ·ä¾†é—œäº†ï¼Œå…¶å¯¦é‚„åœ¨èƒŒæ™¯
- æ›´æ–°å¾Œè«‹ã€Œå®Œå…¨é€€å‡ºèˆŠç‰ˆ appã€å†é‡é–‹
- Finder æ²’æ›´æ–°å¯åŸ·è¡Œï¼š
  killall Finder

--------------------------------------------------------------------
3) NSPopoverï¼ˆmacOS åŸç”Ÿ Popoverï¼‰å°ˆç”¨èªªæ˜ã€é‡è¦ã€‘
--------------------------------------------------------------------

ä½ ç¾åœ¨ä½¿ç”¨çš„æ˜¯ Popover æ–¹æ¡ˆï¼Œèˆ‡ä¸€èˆ¬ Tauri app æœ‰å·®ç•°ï¼š

(1) ä¾è³´ä½ç½®ï¼ˆä¸€å®šè¦å°ï¼‰
- Rustï¼šsrc-tauri/Cargo.toml
  - tauri-plugin-nspopover
- JSï¼špackage.json
  - ä½¿ç”¨ git URLï¼ˆä¸æ˜¯ npm registryï¼‰
- æ¬Šé™ï¼šsrc-tauri/capabilities/default.json
  - å¿…é ˆåŒ…å« nspopover permissions
- Trayï¼š
  - ä¸è¦åœ¨ tauri.conf.json ä½¿ç”¨ systemTray
  - Tray icon ç”± Rust å»ºç«‹

(2) npm install è¦ä¸è¦è·‘ï¼Ÿ
- åªæ”¹ React / CSS â†’ ä¸ç”¨
- æœ‰æ”¹ package.jsonï¼ˆæ–°å¢ä¾è³´ï¼‰â†’ ä¸€å®šè¦è·‘
  npm install

âš ï¸ æ³¨æ„ï¼š
tauri-plugin-nspopover ä¸æ˜¯ npm å¥—ä»¶
âŒ npm i tauri-plugin-nspopover
âœ… git URL + npm install

--------------------------------------------------------------------
4) å¸¸è¦‹æƒ…å¢ƒ â†’ è¦è·‘å“ªå€‹ï¼Ÿ
--------------------------------------------------------------------

Q1ï¼šæˆ‘åªæ˜¯åœ¨èª¿ UIã€CSSã€React state  
â†’ npx tauri dev

Q2ï¼šæˆ‘åœ¨æ”¹ tray / popover / timer è¡Œç‚º  
â†’ npx tauri dev

Q3ï¼šæˆ‘è¦æ¯å¤©ç”¨ / çµ¦æœ‹å‹ç”¨  
â†’ npx tauri build

Q4ï¼šbuild äº†ä½† app çœ‹èµ·ä¾†æ²’è®Š  
â†’ é‚„åœ¨è·‘èˆŠç‰ˆï¼ˆèƒŒæ™¯ï¼‰
â†’ å®Œå…¨é€€å‡ºå¾Œé‡é–‹ï¼Œæˆ–é‡æ–°å®‰è£ dmg

Q5ï¼šå…¨è¢å¹• Chrome é» icon ä¸æµ®åœ¨æœ€ä¸Šé¢  
â†’ é‚„åœ¨ç”¨æ™®é€š window
â†’ å¿…é ˆä½¿ç”¨ NSPopover

--------------------------------------------------------------------
5) UI / CSSï¼ˆPopover å°ˆç”¨åŸå‰‡ï¼‰
--------------------------------------------------------------------

Popover UI åŸå‰‡ï¼š

- body èƒŒæ™¯è¨­ç‚º transparent
- menu-cardï¼š
  - width / height = 100%
  - padding æ§åˆ¶å…§è·
- ä½¿ç”¨ flex + flex:1 æ’æ»¿ä¸­é–“å…§å®¹
- ä¸ä½¿ç”¨ body å±…ä¸­ï¼ˆé¿å…éœ²åº•è‰²ï¼‰

Popover æ˜¯ã€Œå›ºå®šå®¹å™¨ã€ï¼Œä¸æ˜¯ä¸€èˆ¬ç¶²é ã€‚

--------------------------------------------------------------------
6) ä¾è³´èˆ‡è¨­å®šæ³¨æ„äº‹é …ï¼ˆé¿å…è¸©é›·ï¼‰
--------------------------------------------------------------------

- Cargo.tomlï¼š
  - åªèƒ½æœ‰ä¸€å€‹ [dependencies]
- tauri.conf.jsonï¼š
  - schema not allowed â†’ é€šå¸¸æ˜¯ Popover / tray ç”¨éŒ¯åœ°æ–¹
- plugin panicï¼ˆunwrap Noneï¼‰ï¼š
  - tray / window id ä¸ä¸€è‡´

--------------------------------------------------------------------
7) ä¹‹å¾Œå¯ä»¥æ€éº¼ç¹¼çºŒå‡ç´š YC Todoï¼Ÿ
--------------------------------------------------------------------

ã€UX / ç”¢å“ç­‰ç´šã€‘
- tray icon é¡¯ç¤ºå‰©é¤˜æ™‚é–“
- timer çµæŸ Notification Center é€šçŸ¥
- å°ˆæ³¨æ¨¡å¼ï¼šé€²è¡Œä¸­ task é–å®š
- ç©ºç‹€æ…‹ / completed å‹•ç•«

ã€ç³»çµ±æ•´åˆã€‘
- é–‹æ©Ÿè‡ªå‹•å•Ÿå‹•
- Global shortcutï¼ˆâŒ˜â‡§Tï¼‰
- æ·±è‰² / æ·ºè‰²æ¨¡å¼åŒæ­¥
- æœªä¾†ç§»æ¤ Windowsï¼ˆé NSPopoverï¼‰

ã€ç™¼ä½ˆã€‘
- .dmg åˆ†äº«
- code signing / notarizationï¼ˆä¹‹å¾Œï¼‰
- æ­£å¼ç‰ˆæœ¬è™Ÿç®¡ç†

--------------------------------------------------------------------
8) ğŸ”¢ è‡ªå‹•å‡ç´šç‰ˆæœ¬è™Ÿï¼ˆSemVerï¼‰ã€å¼·çƒˆæ¨è–¦ã€‘
--------------------------------------------------------------------

ç‚ºé¿å…æ‰‹å‹•ä¿®æ”¹ç‰ˆæœ¬è™Ÿå°è‡´æ··äº‚ï¼Œ
å»ºè­°ä½¿ç”¨ npm script ä¸€éµåŒæ­¥å‡ç´šï¼š

- package.json
- src-tauri/tauri.conf.json
- src-tauri/Cargo.toml

ç‰ˆæœ¬æ ¼å¼ï¼š
  MAJOR.MINOR.PATCH

ä½ çš„ç­–ç•¥ï¼š
- å°ä¿® bugï¼š0.2.0 â†’ 0.2.1
- æ–°åŠŸèƒ½éšæ®µï¼š0.1.9 â†’ 0.2.0ï¼ˆåˆ»æ„ä¸ç”¨ 0.1.10ï¼‰
- å¤§æ”¹ç‰ˆï¼š0.x â†’ 1.0.0

------------------------------------------------------------
(1) åœ¨ package.json åŠ å…¥ scripts
------------------------------------------------------------

"scripts": {
  "bump:patch": "node scripts/bump-version.js patch",
  "bump:minor": "node scripts/bump-version.js minor",
  "bump:major": "node scripts/bump-version.js major"
}

------------------------------------------------------------
(2) æ–°å¢å‡ç‰ˆè…³æœ¬
------------------------------------------------------------

å»ºç«‹ï¼š
  scripts/bump-version.js

å…§å®¹ï¼š

const fs = require("fs");

const mode = process.argv[2];
const files = [
  "package.json",
  "src-tauri/tauri.conf.json",
  "src-tauri/Cargo.toml",
];

function bump(v) {
  let [M, m, p] = v.split(".").map(Number);
  if (mode === "patch") p++;
  else if (mode === "minor") { m++; p = 0; }
  else if (mode === "major") { M++; m = 0; p = 0; }
  return `${M}.${m}.${p}`;
}

files.forEach((f) => {
  const t = fs.readFileSync(f, "utf8");
  const m = t.match(/version[\" =:]+([0-9]+\.[0-9]+\.[0-9]+)/);
  if (!m) return;
  const nv = bump(m[1]);
  fs.writeFileSync(f, t.replace(m[1], nv));
  console.log(`${f}: ${m[1]} â†’ ${nv}`);
});

------------------------------------------------------------
(3) å¯¦éš›ä½¿ç”¨æ–¹å¼
------------------------------------------------------------

å°ä¿®ï¼š
  npm run bump:patch

æ–°åŠŸèƒ½éšæ®µï¼ˆæœ€å¸¸ç”¨ï¼‰ï¼š
  npm run bump:minor

å¤§æ”¹ç‰ˆï¼š
  npm run bump:major

------------------------------------------------------------
(4) æ¨™æº–ç™¼ä½ˆæµç¨‹ï¼ˆå«ç‰ˆæœ¬ï¼‰
------------------------------------------------------------

æ”¹åŠŸèƒ½
  â†“
npx tauri dev
  â†“
æ¸¬è©¦ OK
  â†“
npm run bump:minor
  â†“
npx tauri build
  â†“
ç”¨æ–° dmg å®‰è£ / ç™¼ä½ˆ

--------------------------------------------------------------------
9) ä¸€å¥ç¸½çµï¼ˆå®šä½ï¼‰
--------------------------------------------------------------------

YC Todo å·²ç¶“ä¸æ˜¯å­¸ç¿’ Demoï¼Œè€Œæ˜¯ï¼š

ã€Œä¸€å€‹çœŸæ­£å¯ä»¥æ¯å¤©ä½¿ç”¨ã€å¯æŒçºŒé€²åŒ–çš„ macOS menubar productivity appã€

è¨˜ä½å…©èªªè©±å°±å¤ ï¼š
- æ”¹åŠŸèƒ½ â†’ dev
- è¦ç”¨ / ç™¼ä½ˆ â†’ build

--------------------------------------------------------------------
ï¼ˆå®Œï¼‰
